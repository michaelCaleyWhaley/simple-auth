!function(e){var r={};function n(o){if(r[o])return r[o].exports;var t=r[o]={i:o,l:!1,exports:{}};return e[o].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=e,n.c=r,n.d=function(e,r,o){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)n.d(o,t,function(r){return e[r]}.bind(null,t));return o},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=4)}([function(e,r){e.exports=require("mongoose")},function(e,r){e.exports=require("body-parser")},function(e,r){e.exports=require("bcrypt")},function(e,r){e.exports=require("express")},function(e,r,n){"use strict";n.r(r);var o=n(3),t=n.n(o),s=n(1),a=n.n(s),u=n(0),i=n.n(u);const c=new i.a.Schema({name:String,password:String});var d=i.a.model("user",c);var l=n(2),p=n.n(l);var f=e=>{const r=p.a.genSaltSync(10);return p.a.hashSync(e,r)};const y=t()();y.use(a.a.urlencoded({extended:!1})),y.use(a.a.json());const b=(()=>{i.a.connect("mongodb://127.0.0.1:27017",{useUnifiedTopology:!0,useNewUrlParser:!0}).catch(e=>{console.log("error: ",e)});const e=i.a.connection;return e.on("error",console.error.bind(console,"connection error:")),e})();y.post("/register",async(e,r)=>{const{username:n,password:o}=e.body;if(!n||!o)return void r.status(400).send({error:"Username or password missing"});await d.findOne({name:n})?r.status(409).send({error:"Username already exists."}):(await(async({username:e,password:r})=>{const n=new d({name:e,password:f(r)});return await n.save()})({db:b,username:n,password:o}),r.status(200).send({success:"All good"}))}),y.listen(3e3),console.log("The app is listening on port 3000")}]);